/* ------------------------------
   Base / Reset
------------------------------ */
:root{
  --container-max: 1080px;
  --brand: #111;
  --accent: #e11;             /* red accent */
  --fg: #111;
  --fg-2: #374151;            /* gray-700 */
  --fg-3: #6b7280;            /* gray-500 */
  --muted: #9ca3af;           /* gray-400 */
  --border: #e5e7eb;          /* gray-200 */
  --bg: #f8fafc;              /* gray-50 */
  --card: #ffffff;
  --green: #16a34a;
  --red: #dc2626;
  --amber: #f59e0b;
  --blue: #2563eb;

  /* header + safe areas */
  --header-height: 56px;               /* used by mobile notif sheet */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  /* form control sizes */
  --control-sm: 16px;         /* checkbox/radio */
  --field-min-h: 40px;        /* text/date/time/select */
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font: 14px/1.45 system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--fg);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/* Prevent media from overflowing cards on mobile */
img, video, canvas, svg { max-width: 100%; height: auto; display: block; }
a { color: var(--blue); text-decoration: none; }
a:hover { text-decoration: underline; }

.container {
  width: 100%;
  max-width: var(--container-max);
  margin: 0 auto;
  padding: 0 16px;
}

/* ------------------------------
   Header (clean, no wrap on desktop)
------------------------------ */
.site-header {
  background: #fff;
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 50;
}

.header-inner {
  max-width: var(--container-max);
  margin: 0 auto;
  padding: 10px 16px;

  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 16px;

  min-width: 0;
}

/* Brand */
.brand {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: inherit;
  text-decoration: none;
  white-space: nowrap;
}
.brand-box {
  background: var(--brand);
  color: #fff;
  font-weight: 800;
  padding: 4px 10px;
  border-radius: 10px;
  letter-spacing: 0.8px;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2) inset;
}

/* Nav (desktop) */
.nav-links {
  justify-self: center;
  display: flex;
  gap: 18px;
  align-items: center;
  min-width: 0;
}

.nav-links a {
  color: var(--fg-2);
  text-transform: uppercase;
  letter-spacing: 0.6px;
  font-weight: 800;
  font-size: 12px;

  padding: 8px 10px;
  border-radius: 10px;
  text-decoration: none;
  white-space: nowrap;
}

.nav-links a:hover {
  background: #f3f4f6;
  color: #111;
  text-decoration: none;
}

.nav-links a.is-active,
.nav-links a[aria-current="page"] {
  background: #111;
  color: #fff;
}

/* Right utilities */
.right-side {
  justify-self: end;
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

/* Social icons */
.socials {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-right: 8px;
  border-right: 1px solid var(--border);
}

.icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 30px;
  height: 30px;
  border-radius: 10px;

  background: #f3f4f6;
  border: 1px solid var(--border);
  text-decoration: none;
}

.icon svg {
  width: 16px;
  height: 16px;
  fill: #666;
}

.icon:hover {
  background: #fff;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
}

.icon:hover svg {
  fill: #111;
}

/* Auth / user */
.auth {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.avatar-link img {
  width: 32px;
  height: 32px;
  border-radius: 999px;
  object-fit: cover;
  display: block;
  border: 1px solid rgba(0, 0, 0, 0.12);
}

.hi {
  color: var(--fg-2);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 220px;
}

.role {
  background: #f3f4f6;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
  margin-left: 6px;
}

/* Menu button: only on mobile */
.menu-btn {
  display: none;
}

/* Slightly calmer logout button */
.btn-logout {
  background: #fff;
}

/* ------------------------------
   Responsive header behavior
------------------------------ */
@media (max-width: 900px) {
  .nav-links {
    display: none;
  }
  .menu-btn {
    display: inline-flex;
  }

  .hi {
    max-width: 140px;
  }
}

@media (max-width: 640px) {
  .header-inner {
    padding: 10px 12px;
    gap: 10px;
  }

  .socials {
    display: none; /* prevent wrapping on phones */
  }

  .hi {
    display: none; /* keep header compact */
  }
}


/* ------------------------------
   Hero (black banner) + Welcome card
------------------------------ */
.hero-black { background: radial-gradient(80% 120% at 10% -20%, #222 0, #111 60%, #0a0a0a 100%); color:#fff; }
.hero-inner { padding: 28px 0 22px; }
.hero-title { font-size: 32px; font-weight: 800; letter-spacing: .3px; }
.hero-sub { opacity:.85; margin-top: 6px; }
.hero-accent { height: 3px; background: var(--accent); box-shadow: 0 1px 0 rgba(0,0,0,.2) inset; }

/* Black welcome card */
.card-dark {
  background:#111; color:#fff; border-radius:12px; padding:16px;
  box-shadow: 0 8px 24px rgba(0,0,0,.25); margin: 14px 0;
}
.card-dark-title { font-size: 20px; font-weight: 800; margin-bottom: 6px; }
.card-dark-sub { opacity:.9; }
.card-dark-actions { display:flex; gap:8px; margin-top: 10px; flex-wrap: wrap; }
.btn.on-dark {
  background: transparent; color:#fff; border:1px solid rgba(255,255,255,.3);
}
.btn.on-dark:hover { background: rgba(255,255,255,.08); }

/* ------------------------------
   Cards, Grid & Utilities
------------------------------ */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 1px 0 rgba(0,0,0,0.02);
  overflow: hidden;                 /* keep children inside on mobile */
}
/* Enable inner horizontal scroll when needed without breaking layout */
.card.scroll-x,
.scroll-x { overflow-x: auto; -webkit-overflow-scrolling: touch; }

.grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 12px;
}
.grid > * { grid-column: span 12; }
@media (min-width: 700px) {
  .grid > * { grid-column: span 6; }
}
@media (min-width: 1024px) {
  .grid > * { grid-column: span 4; }
}

/* Status pill */
.status {
  display:inline-flex; align-items:center; gap:6px;
  padding:2px 8px; border-radius:999px;
  background:#f3f4f6; color:#374151; font-size:12px; font-weight:600;
  border: 1px solid #e5e7eb;
}

/* --- Utilities --- */
.row { display:flex; gap:8px; align-items:center; }
.row-between { display:flex; align-items:center; justify-content:space-between; gap:8px; }
.actions { display:flex; gap:8px; flex-wrap:wrap; }
.cols-2 { display:grid; grid-template-columns: 1fr 1fr; gap:8px; }
.cols-2-16 { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
.nowrap { white-space: nowrap; }
.break-all { word-break: break-word; overflow-wrap: anywhere; }

/* ------------------------------
   Buttons (small & uniform)
------------------------------ */
.btn {
  appearance: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;

  height: 32px;               /* small, consistent */
  padding: 0 12px;
  font-size: 12px;
  line-height: 1;

  border: 1px solid var(--border);
  border-radius: 8px;
  background:#fff;
  color: var(--fg);
  font-weight: 600;
  cursor: pointer;
  white-space: nowrap;
}
.btn:hover { background:#f9fafb; }
.btn:disabled { opacity:.6; cursor:not-allowed; }

.btn.primary { background: var(--accent); color:#fff; border-color: var(--accent); }
.btn.primary:hover { filter: brightness(0.95); }

.btn.red { background: var(--red); color:#fff; border-color: var(--red); }
.btn.red:hover { filter: brightness(0.95); }

.btn.green { background: var(--green); color:#fff; border-color: var(--green); }
.btn.green:hover { filter: brightness(0.95); }

.btn.gray { background: #e5e7eb; color:#111; border-color: #e5e7eb; }

.btn.danger { background:#fff; border-color: var(--red); color: var(--red); }
.btn.danger:hover { background: #fff5f5; }

/* ------------------------------
   Forms
------------------------------ */
input, select, textarea {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: #fff;
  color: var(--fg);
  outline: none;
}
input:not([type="checkbox"]):not([type="radio"]), select, textarea {
  min-height: var(--field-min-h);
}
input:focus, select:focus, textarea:focus {
  border-color: #c7d2fe; box-shadow: 0 0 0 3px rgba(99,102,241,.15);
}
label { display:block; margin-bottom: 6px; color: var(--fg-2); font-weight: 600; }

/* Compact checkboxes & radios */
input[type="checkbox"],
input[type="radio"]{
  width: var(--control-sm);
  height: var(--control-sm);
  min-width: var(--control-sm);
  min-height: var(--control-sm);
  padding: 0;
  margin: 0 6px 0 0;
  vertical-align: middle;
  border: 1px solid var(--border);
  background: #fff;
  accent-color: var(--accent);
}
input[type="radio"]{ border-radius: 999px; }
input[type="checkbox"]{ border-radius: 4px; }

/* ------------------------------
   Job-specific small helpers
------------------------------ */
.job-meta { display:flex; gap:16px; flex-wrap:wrap; color: var(--fg-2); }
.job-meta div { display:flex; align-items:center; gap:6px; }

/* ------------------------------
   Tables
------------------------------ */
.table {
  width: 100%;
  border-collapse: collapse;
  border: 1px solid var(--border);
  border-radius: 8px;
  overflow: hidden;           /* keep borders clean in cards */
  table-layout: auto;
}
.table th, .table td {
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  text-align: left;
  vertical-align: top;
  word-break: break-word;     /* long emails/usernames won’t burst */
}
.table thead th { background:#f8fafc; font-weight:700; color: var(--fg-2); }

/* Generic wrapper for horizontal scroll (apply on parent if needed) */
.table-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; }

/* Audit / very wide tables: hide low-priority cols on phones without touching HTML */
@media (max-width: 640px) {
  .table.table--audit thead th:nth-child(3),
  .table.table--audit thead th:nth-child(5),
  .table.table--audit tbody td:nth-child(3),
  .table.table--audit tbody td:nth-child(5) { display:none; } /* e.g., hide Role & Details columns */

  /* Compact attendance tables */
  .table.table--tight th, .table.table--tight td { padding: 8px 8px; }
}

/* ------------------------------
   Footer / misc
------------------------------ */
.footer {
  color: var(--fg-3); text-align:center; padding: 24px 0; margin-top: 24px;
}

/* ------------------------------
   Responsive tweaks
------------------------------ */
@media (max-width: 860px) {
  .nav-links { gap:10px; }
  .hero-title { font-size: 26px; }
}

@media (max-width: 640px) {
  .header-inner { padding: 8px 12px; flex-wrap: wrap; }
  .brand { flex: 1 1 auto; }
  .nav-links { display:none; }       /* keep header uncluttered on small screens */

  /* right side (socials + user) wraps to next line if needed */
  .right-side { width:100%; justify-content:flex-start; gap:8px; flex-wrap:wrap; }

  .socials { gap:6px; }
  .icon { width:20px; height:20px; }
  .icon svg { width:14px; height:14px; }

  /* cards & text spacing */
  .container { padding: 0 12px; }
  .card { padding: 12px; border-radius: 12px; }
  .status { font-size: 12px; padding: 2px 8px; }

  /* utilities: collapse 2-col helpers to 1-col on phones */
  .cols-2, .cols-2-16 { grid-template-columns: 1fr; }

  /* actions: buttons wrap and expand for tap targets */
  .actions .btn { flex: 1 1 48%; }
  .actions .btn.primary,
  .actions .btn.red { flex: 1 1 100%; }
}

@media (max-width: 480px) {
  .actions .btn { flex: 1 1 100%; }
}

/* --- CTA button in ATAG brand --- */
.btn-cta{
  display:inline-flex; align-items:center; gap:8px;
  background:#111;                 /* brand black */
  border:1px solid #111;
  color:#fff; font-weight:700;
  padding:8px 12px; border-radius:8px;
}
.btn-cta:hover{ filter:brightness(.92); text-decoration:none; }
.btn-cta .plus{ width:18px; height:18px; display:block; fill: currentColor; stroke: currentColor; }

/* ------------------------------
   Modal (backdrop, layout, scroll)
------------------------------ */

/* Darken the outside */
.modal-backdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  z-index: 999;
}

/* Centered modal container */
.modal{
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;              /* gutter for small screens */
  pointer-events: none;       /* clicks go to card only */
}

/* Dialog card */
.modal-card{
  pointer-events: auto;
  width: 100%;
  max-width: 840px;             /* like old */
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
  display: flex;
  flex-direction: column;
  max-height: 90vh;             /* like old */
  overflow: hidden;
  transform: translateY(4px);
  opacity: .98;
  animation: modalIn .16s ease-out both;
}

/* You can even drop modal-lg override entirely */
.modal-card.modal-lg{
  max-width: 880px;
}


/* Small variant */
.modal-card.modal-sm{ max-width:560px; }

/* Sections */
.modal-header{
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
  font-weight: 700;
}

.modal-body{
  padding: 12px 16px;      /* same as old version */
  overflow: auto;          /* area scrolls */
}


.modal-footer{
  padding: 12px 16px;
  border-top: 1px solid var(--border);
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}


/* Prevent background page from scrolling while modal open */
body.modal-open { overflow: hidden; }

/* Subtle pop-in */
@keyframes modalIn{ to{ transform:none; opacity:1; } }

/* On very small screens, stick modal nearer top with smaller gutter */
@media (max-width: 640px) {
  .modal{
    align-items: flex-start;
    padding: 8px;
  }
  .modal-card{
    max-height: calc(100vh - 16px);
  }
}

/* Transport options layout */
.transport-options {
  display: flex;
  gap: 24px;
  align-items: center;
  flex-wrap: wrap;
}
.transport-options .check {
  display: flex !important;      /* override global label rule */
  align-items: center;
  gap: 8px;
  white-space: nowrap;           /* avoid "ATAG" line-break "Bus" */
}

/* Comfortable height for date/time fields */
input[type="time"], input[type="date"] { min-height: var(--field-min-h); }

/* Keep transport row tidy */
.modal .card label { font-weight: 600; }

.pill{
  display:inline-flex; align-items:center; gap:6px;
  padding:4px 10px; border-radius:999px; font-weight:600; font-size:12px;
  background:#eef2ff; color:#1f2937;
}

/* ------------------------------
   NEW: Page-specific responsive helpers
------------------------------ */

/* MyJobs cards – comfortable spacing and clean dividers on mobile */
.jobs-list { display:grid; gap:12px; }
@media (min-width: 700px){
  .jobs-list { grid-template-columns: 1fr 1fr; }
}
.job-card__meta { display:flex; flex-wrap:wrap; gap:10px; color:var(--fg-2); }

/* Admin two-column forms collapse nicely */
.admin-grid { display:grid; gap:12px; grid-template-columns: 1fr; }
@media (min-width: 900px){ .admin-grid { grid-template-columns: 1fr 1fr; } }

/* Keep admin boxes inside cards even with long text */
.admin-card * { min-width: 0; }
.admin-card .break { word-break: break-word; overflow-wrap: anywhere; }

/* Audit log list: smaller font + wrap emails on mobile */
.audit-list { font-size: 13px; }
.audit-list .email { word-break: break-word; }

/* When a wide table must remain a table, use both: a wrapper + compact mode */
.table-wrap.-compact .table th,
.table-wrap.-compact .table td { padding: 8px 10px; }

/* Hide horizontal scrollbar visuals while keeping scrollable area touch-friendly */
.no-scrollbar::-webkit-scrollbar { display:none; }
.no-scrollbar { scrollbar-width: none; }

/* ------------------------------
   Notifications dropdown (works great on mobile)
   Pair with NotificationsBell using .notif-wrap/.notif-popover/etc.
------------------------------ */

.notif-wrap { position: relative; }

.notif-popover {
  position: absolute; right: 0; margin-top: 8px;
  width: 420px; max-height: 420px; overflow: auto;
  z-index: 60; /* above sticky header (50) */
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,.15);
}

.notif-tabs {
  display: flex; gap: 8px;
  padding: 8px; border-bottom: 1px solid var(--border);
}
.notif-tabs .btn {
  background: #f5f5f5; color:#111; border-color:#e5e7eb;
}
.notif-tabs .btn.is-active {
  background:#111; color:#fff; border-color:#111;
}

.notif-list { padding: 6px 0; }
.notif-item {
  padding: 10px 8px;
  border-bottom: 1px solid #f0f0f0;
  display: flex; gap: 10px; cursor: pointer;
  background: #fff;
}
.notif-item.unread { background: #f8fafc; }
.notif-item .ico {
  width: 36px; height: 36px; border-radius: 999px;
  display: flex; align-items: center; justify-content: center;
  border: 1px solid #eee; flex: 0 0 36px;
}
.notif-item .meta { flex: 1 1 auto; min-width: 0; }
.notif-item .meta .title { font-weight: 700; }
.notif-item .meta .body { color: #444; margin-top: 2px; }
.notif-item .meta .time { color:#777; font-size:12px; margin-top:4px; }

.notif-empty {
  padding: 12px; color: #666;
}

/* Mobile: convert dropdown to a top sheet that fits below header */
@media (max-width: 640px) {
  .notif-popover {
    position: fixed;
    left: 8px; right: 8px;
    top: calc(var(--safe-top) + var(--header-height) + 8px);
    width: auto;
    max-height: calc(100vh - var(--safe-top) - var(--header-height) - 24px);
    margin-top: 0;
  }
}
